/*! @version pwa-studio: 0.0.1, @magento/venia-ui: ~10.3.0, @magento/venia-sample-payments-checkmo: ^0.0.12, @magento/upward-security-headers: ~1.0.14, @magento/pwa-theme-venia: ~1.4.0, @magento/pwa-buildpack: ~11.4.3, @magento/peregrine: ~13.1.1, @magento/pagebuilder: ~8.2.1, @magento/eslint-config: ~1.5.0, @magento/babel-preset-peregrine: ~1.2.3, @apollo/client: ~3.6.9 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[71,99],{"37B2":function(e,t,a){"use strict"
a.r(t)
var s=a("q1tI"),r=a.n(s),n=a("dDsW"),u=a("OWb7"),l=a("y1Xp"),c=a("6sa0"),i=a("8UhI"),o=a("fq0T"),m=a("+TN3"),b=a("pZLH"),d=a("b1jg"),g=a("MIsT"),p=a("U2T0"),y=a("oTwF"),f=a("ACyH"),R=a("6rn4"),q=a("QMhA"),h=a("LboF"),P=a.n(h),x=a("4nBG"),E={injectType:"singletonStyleTag",insert:"head",singleton:!0},v=(P()(x.a,E),x.a.locals||{}),w=a("oxYw"),O=a("ghHa"),j=a("J3e4"),T=a("HTR8"),M=a("Pzd5")
t.default=(e=>{var t,a
const{classes:h}=e,P=Object(l.a)(v,h),{formatMessage:x}=Object(n.a)(),E=Object(O.a)(),{isUserSignedIn:N}=E,{getBuyRequestStatus:S,getList:L}=Object(s.useContext)(M.a),[,{addToast:_}]=Object(j.a)(),F=Object(l.a)(c.b,e.operations),{getEcommerceSourceList:B,createBuyRequestWithUrl:k}=F,C=r.a.createElement(y.a,{src:R.a,attrs:{width:18}}),I=r.a.createElement(y.a,{src:q.a,attrs:{width:18}}),W=x({id:"buyRequestPage.title",defaultMessage:"Create a buy request"}),U=x({id:"buyRequestPage.metaDescription",defaultMessage:"Create a buy request"}),A=Object(s.useRef)(),J=Object(s.useRef)(),K=Object(s.useRef)(),G=Object(s.useRef)(),H=Object(s.useRef)(),D=Object(s.useRef)(),z=null===(t=K.current)||void 0===t?void 0:t.value,[Q,V]=Object(s.useState)(null),{data:X}=Object(m.b)(B,{nextFetchPolicy:"cache-first",fetchPolicy:"cache-and-network"}),[Y]=Object(b.a)(k),Z=X?null==X?void 0:null===(a=X.getEcommerceSourceList)||void 0===a?void 0:a.items.filter(e=>"japan_flow"!==e.code).map(e=>({key:e.code,value:e.code,label:e.name})):null,[$,ee]=Object(s.useState)(!1)
Object(s.useEffect)(()=>{ee("mercari"!==z)},[Z])
const te=r.a.createElement(i.b,{onSubmit:async e=>{try{if(N){const e={item_original_page:A.current.value,item_price:J.current.value?parseFloat(J.current.value):0,ecommerce_name:K.current.value,comment:G.current.value}
"mercari"!==z&&(e.item_qty=H.current.value?parseInt(H.current.value):1)
const t=await Y({variables:e})
await S(),await L(),A.current.value="",J.current.value="",G.current.value="","mercari"!==z&&(H.current.value="")
const a=t.data.createBuyRequestWithUrl.status
let s="",r=""
"success"==(a?"success":"error")&&(s="/dashboard/buy-requests",r=x({id:"result.data.createBuyRequestWithUrl.message",defaultMessage:"View your requests"})),_({type:"success",icon:C,message:x({id:"result.data.createBuyRequestWithUrlData.message",defaultMessage:t.data.createBuyRequestWithUrl.message}),link:s,linkLabel:r})}else _({type:"error",icon:I,message:x({id:"searchPage.createBuyRequestWithUrlData.error",defaultMessage:"Please sign in to create a buy request"})})}catch(e){}},className:P.form,ref:D},r.a.createElement(p.a,{label:"Link Product",isRequiredLabel:!0},r.a.createElement(d.a,{field:"url",forwardedRef:A,validate:Object(T.a)([o.e,o.f])}),r.a.createElement("p",{className:"text-sm text-left"},x({id:"categoryContent.buyRequestProductSubLabel",defaultMessage:"Please enter the link of the product you wish to purchase"}))),r.a.createElement(p.a,{label:"Price (Â¥)"},r.a.createElement(d.a,{field:"price",forwardedRef:J,validate:o.d}),r.a.createElement("p",{className:"text-sm text-left"},x({id:"categoryContent.buyRequestPriceSubLabel",defaultMessage:"Please enter the price you can afford for that product"}))),$&&r.a.createElement(p.a,{label:"Quantity"},r.a.createElement(d.a,{field:"quantity",forwardedRef:H,validate:o.d}),r.a.createElement("p",{className:"text-sm text-left"},x({id:"searchPage.buyRequestWebsiteSubLabel",defaultMessage:"Please enter the quantity you wish to purchase"}))),r.a.createElement(p.a,{label:"Website"},r.a.createElement("div",null,r.a.createElement("select",{id:"options_ecommerce",field:"options_ecommerce",ref:K,className:P.select,onChange:e=>{V(e.target.value)}},Z&&Z.map((e,t)=>r.a.createElement("option",{value:e.value,key:t},e.label)),r.a.createElement("option",{value:"other"},x({id:"searchPage.buyRequestWebsiteOther",defaultMessage:"Other"})))),r.a.createElement("p",{className:"text-sm text-left"},x({id:"categoryContent.buyRequestWebsiteSubLabel",defaultMessage:"Please enter the website name where you found the product"}))),r.a.createElement(p.a,{label:"Comment"},r.a.createElement(g.a,{field:"comment",forwardedRef:G}),r.a.createElement("p",{className:"text-sm text-left"},x({id:"categoryContent.buyRequestCommentSubLabel",defaultMessage:"You can leave additional notes here"}))),!N&&r.a.createElement("p",{className:"text-sm text-left text-primary500"},x({id:"categoryContent.buyRequestRequiredSignIn",defaultMessage:"Please sign in to create a buy request"})),r.a.createElement(f.a,{type:"submit",className:P.buyRequestPageBtn,disabled:!N},x({id:"categoryContent.ecommerceBuyRequestLabel",defaultMessage:"Create a Buy Request"}))),ae=x({id:"categoryContent.ecommerceBuyRequestTitle",defaultMessage:"Product Request Form"}),se=r.a.createElement("div",{className:P.buyRequestPage},r.a.createElement("h2",{className:P.buyRequestPageTitle},ae),r.a.createElement("p",{className:P.buyRequestPageSubTitle},x({id:"searchPage.recommendProductsSubTitle",defaultMessage:"Can't find the product? Let us search for you"})),r.a.createElement("section",{className:P.section},te))
return r.a.createElement(s.Fragment,null,r.a.createElement(u.b,null,W),r.a.createElement(u.a,{name:"title",content:W}),r.a.createElement(u.a,{name:"description",content:U}),r.a.createElement(w.a,{currentPageTitle:W}),r.a.createElement("article",{className:P.root},se))})},"4nBG":function(e,t,a){"use strict"
var s=a("JPst"),r=a.n(s),n=a("cMkR"),u=a("856M"),l=a("HeW1"),c=a.n(l),i=a("sNe+"),o=a.n(i),m=r()(function(e){return e[1]})
m.i(n.a,"",!0),m.i(u.a,"",!0)
var b=c()(o.a)
m.push([e.i,".buyRequestPage-root-R9- {\n}\n\n.buyRequestPage-buyRequestPageTitle-gh3 {;\n}\n\n.buyRequestPage-buyRequestPageSubTitle-cMS {\n}\n\n.buyRequestPage-buyRequestPageBtn-LGJ {\n}\n\n.buyRequestPage-buyRequestPage-aJP {\n}\n\n.buyRequestPage-section-IkU {\n}\n\n.buyRequestPage-select-cKF {\n    background: url("+b+") no-repeat !important;\n    background-size: 20px !important;\n    background-position: calc(100% - 8px) 50% !important;\n}\n\n.buyRequestPage-form-FmL {\n}",""]),m.locals={root:"buyRequestPage-root-R9- px-4",buyRequestPageTitle:"buyRequestPage-buyRequestPageTitle-gh3 text-[28px] lg_text-[36px] leading-[2.125rem] lg_leading-[2.625rem] text-primary500",buyRequestPageSubTitle:"buyRequestPage-buyRequestPageSubTitle-cMS mb-3",buyRequestPageBtn:"buyRequestPage-buyRequestPageBtn-LGJ "+n.a.locals.root_highPriority+" w-fit mx-auto",buyRequestPage:"buyRequestPage-buyRequestPage-aJP lg_my-6 my-4 text-center",section:"buyRequestPage-section-IkU md_w-1/2 mx-auto md_px-0",select:"buyRequestPage-select-cKF "+u.a.locals.input+" flex",form:"buyRequestPage-form-FmL flex flex-col gap-y-4"},t.a=m},GN9i:function(e,t,a){"use strict"
var s=a("JPst"),r=a.n(s),n=a("hR8V"),u=r()(function(e){return e[1]})
u.i(n.a,"",!0),u.push([e.i,".textArea-input-FKv {\n}\n\n.textArea-input-FKv:focus {\n    box-shadow: 0px 0px 0px 4px #F2F4F7;\n}\n\n.textArea-input_error-lvO {\n}\n\n.textArea-input_shimmer-PKZ {\n    font-size: 1rem;\n}\n",""]),u.locals={input:"textArea-input-FKv "+n.a.locals.input+" h-auto max-w-full min-w-full px-xs py-3",input_error:"textArea-input_error-lvO textArea-input-FKv "+n.a.locals.input+" h-auto max-w-full min-w-full px-xs py-3 border-error500 focus_border-error500",input_shimmer:"textArea-input_shimmer-PKZ h-auto m-0 max-w-full min-h-[6.75rem] min-w-full px-[15px] py-[12px] rounded-md w-full"},t.a=u},MIsT:function(e,t,a){"use strict"
var s=a("pVnL"),r=a.n(s),n=a("QILm"),u=a.n(n),l=a("q1tI"),c=a.n(l),i=a("17x9"),o=a("8UhI"),m=a("c3RJ"),b=a("y1Xp"),d=a("gpca"),g=a("LboF"),p=a.n(g),y=a("GN9i"),f={injectType:"singletonStyleTag",insert:"head",singleton:!0},R=(p()(y.a,f),y.a.locals||{})
const q=["classes","field","message","regionError"],h=e=>{const{classes:t,field:a,message:s,regionError:n}=e,i=u()(e,q),g=Object(m.a)(a),p=Object(b.a)(R,t)
var y=g.error?p.input_error:p.input
return c.a.createElement(l.Fragment,null,c.a.createElement(o.i,r()({},i,{className:y,field:a})),c.a.createElement(d.a,{fieldState:g},s))}
t.a=h
h.defaultProps={cols:40,rows:6,wrap:"hard"},h.propTypes={classes:Object(i.shape)({input:i.string}),cols:Object(i.oneOfType)([i.number,i.string]),field:i.string.isRequired,message:i.node,rows:Object(i.oneOfType)([i.number,i.string]),wrap:Object(i.oneOf)(["hard","soft"])}},oxYw:function(e,t,a){"use strict"
var s=a("q1tI"),r=a.n(s),n=a("eFMt"),u=a("17x9"),l=a("dDsW"),c=a("55Ip"),i=a("y1Xp"),o=a("7B/N")
const m=r.a.createElement(o.e,null),b=e=>{const{classes:t,currentPageTitle:a}=e,u=Object(i.a)(n.a,t),{formatMessage:o}=Object(l.a)(),b=o({id:"global.home",defaultMessage:"Home"})
return r.a.createElement(s.Fragment,null,r.a.createElement("div",{className:u.root,"aria-live":"polite","aria-busy":"false"},r.a.createElement(c.b,{className:u.link,to:"/"},b),r.a.createElement("span",{className:u.divider},m),r.a.createElement("span",{className:u.text},a)))}
b.propTypes={classes:Object(u.shape)({root:u.string})},t.a=b}}])
