/*! @version pwa-studio: 0.0.1, @magento/venia-ui: ~10.3.0, @magento/venia-sample-payments-checkmo: ^0.0.12, @magento/upward-security-headers: ~1.0.14, @magento/pwa-theme-venia: ~1.4.0, @magento/pwa-buildpack: ~11.4.3, @magento/peregrine: ~13.1.1, @magento/pagebuilder: ~8.2.1, @magento/eslint-config: ~1.5.0, @magento/babel-preset-peregrine: ~1.2.3, @apollo/client: ~3.6.9 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[60,99],{"0UvQ":function(e,t,n){"use strict"
var o=n("JPst"),r=n.n(o),a=n("cMkR"),i=n("B0WO"),l=r()(function(e){return e[1]})
l.i(a.a,"",!0),l.i(i.a,"",!0),l.push([e.i,".saveKeywords-btnSave-b44 {\n}\n\n.saveKeywords-modal-iCO {\n}\n\n.saveKeywords-modalHeader-t8O {\n    align-items: center !important;\n}\n\n/* index.css */\n.save-keyword-form{\n    border-bottom: solid 1px #ddd;\n    padding-bottom: 20px;\n}\n.save-keyword-form label{\n    font-size: 14px;\n}\n.saved-keywords{\n    padding-top: 16px;\n}\n.text-danger{\n    color: var(--error500);\n}\n\n.text-danger:hover{\n    color: #ae3529;\n}\n\n.text-error{\n    color: var(--error500);\n    padding: 8px 0 0 0;\n    font-size: 14px;\n    line-height: 20px;\n    font-weight: 400;\n    text-align: left;\n}\n.text-error:empty{\n    display: none;\n}\n\n\n\n\n\n\n@media screen and (max-width: 960px) {\n    .save-keywords-btn{\n        margin-left: 8px;\n        order: 1;\n    }\n    .category-headerButtons-qAB{\n        flex-wrap: wrap;\n        row-gap: 10px;\n    }\n}\n\n",""]),l.locals={btnSave:"saveKeywords-btnSave-b44 "+a.a.locals.root_highPriority,modal:"saveKeywords-modal-iCO "+i.a.locals.modal,modalHeader:"saveKeywords-modalHeader-t8O"},t.a=l},B0WO:function(e,t,n){"use strict"
var o=n("JPst"),r=n.n(o),a=n("HeW1"),i=n.n(a),l=n("sNe+"),s=n.n(l),c=r()(function(e){return e[1]}),d=i()(s.a)
c.push([e.i,'.addWishList-modal-2LD{\n    margin-left: auto;\n    margin-right: auto;\n    width: 100%;\n    min-width: 100%;\n    max-width: calc(100% - 32px);\n    padding-left: 1rem;\n    padding-right: 1rem;\n}\n@media (min-width: 768px){\n    .addWishList-modal-2LD{\n        min-width: 458px;\n    }\n    .addWishList-modal-2LD{\n        max-width: 100%;\n    }\n}\n\n/* index.css */\n.save-keyword-form{\n    border-bottom: solid 1px #ddd;\n    padding-bottom: 20px;\n}\n.save-keyword-form label{\n    font-size: 14px;\n}\n.saved-keywords{\n    padding-top: 16px;\n}\n.text-danger{\n    color: var(--error500);\n}\n\n.text-danger:hover{\n    color: #ae3529;\n}\n\n.text-error{\n    color: var(--error500);\n    padding: 2px;\n    padding-top: 10px;\n    font-size: 14px;\n    font-weight: 600;\n}\n.text-error:empty{\n    display: none;\n}\n\n\n.keyword:hover {\n    text-decoration: underline;\n}\n\ntable{\n    width: 100%;\n}\n.btn-success{\n    font-size: 12px;\n    font-weight: 600;\n    padding: 8px 14px 7px;\n    color: #fff;\n    background-color: #5cb85c;\n    border-color: #4cae4c;\n    margin-left: 10px;\n}\n.btn-success:hover{\n    background-color: #449d44;\n    border-color: #398439;\n}\n.flex-textInput{\n    flex: unset;\n}\n.fz-20{\n    font-size: 20px;\n}\n.text-grey{\n    color: #777;\n}\n.form-field:not(.checkmark-container){\n    margin-bottom: 20px;\n    display: grid;\n    align-content: flex-start;\n}\n\n.w-30p{\n    display: block;\n    width: 30%;\n}\n.mb-20{\n    margin-bottom: 20px;\n}\n\n.addWishList-inputText-I-9{\n    height: 54px;\n    border: solid 1px var(--neutral300);\n    outline: none;\n    padding: 16px 12px;\n    flex-grow: 1;\n    font-size: 16px;\n    line-height: 1.375;\n    font-weight: 600;\n    color: var(--neutral700);\n    border-radius: 4px;\n}\n\n.add-wishlist input:not([type=\'checkbox\']):focus {\n    border-color: var(--secondary500);\n    box-shadow: 0px 0px 0px 4px var(--neutral100);\n}\n\n.checkmark-container {\n    position: relative;\n    display: inline-block;\n    padding-right: 30px;\n}\n\n.checkmark-container input[type=\'checkbox\'] {\n    position: absolute;\n    opacity: 0;\n    width: 20px;\n    height: 20px;\n    top: 1px;\n    right: 0;\n    z-index: 2;\n    cursor: pointer;\n}\n\n.checkmark-container input[type=\'checkbox\'] + .checkmark {\n    position: absolute;\n    top: 1px;\n    right: 0;\n    border: 1px solid var(--neutral500);\n    width: 20px;\n    height: 20px;\n    border-radius: 4px;\n}\n\n.checkmark-container .checkmark::after {\n    content: "";\n    display: none;\n    width: 14px;\n    height: 14px;\n    background: url(\'data:image/svg+xml,<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.6663 3.5L5.24967 9.91667L2.33301 7" stroke="%23C40046" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>\') no-repeat;\n    background-size: 14px;\n    position: absolute;\n    right: 2px;\n    top: 2px;\n    opacity: 0;\n    visibility: hidden;\n}\n\n.checkmark-container input[type=\'checkbox\']:checked + .checkmark {\n    border-color: var(--primary500);\n}\n\n.checkmark-container input[type=\'checkbox\']:checked + .checkmark::after {\n    display: block;\n    opacity: 1;\n    visibility: visible;\n}\n\n.add-wishlist .checkbox-label{\n    margin-bottom: 0 !important;\n}\n.fw-700{\n    font-weight: 700;\n}\n\n.add-wishlist .modal-body select {\n    height: auto;\n    display: block;\n    width: 100%;\n    padding: 14px 24px;\n    color: #475467;\n    background: url('+d+') no-repeat;\n    background-size: 24px;\n    background-position: 100% 50%;\n    background-color: var(--white);\n    background-clip: padding-box;\n    border: 1px solid var(--neutral300);\n    border-radius: 4px;\n    transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;\n    font-size: 16px;\n    line-height: calc(22/16);\n    font-weight: 600;\n    font-family: "Mulish", sans-serif;\n    text-indent: 0;\n    text-shadow: none;\n    align-items: center;\n    white-space: pre;\n    -webkit-rtl-ordering: logical;\n    overflow: visible !important;\n    box-sizing: border-box;\n    text-transform: none;\n    -moz-appearance: none;\n    -webkit-appearance: none;\n            appearance: none;\n    outline: none;\n    cursor: pointer;\n}\n\n@media screen and (max-width: 960px) {\n    .category-headerButtons-qAB{\n        flex-wrap: wrap;\n        row-gap: 10px;\n    }\n\n    .addWishList-modal-body-uUy {\n        max-height: 360px;\n    }\n}\n\n@media screen and (max-width: 768px) {\n    .popup-overlay .popup-content {\n        width: 100%;\n    }\n}\n',""]),c.locals={modal:"addWishList-modal-2LD",inputText:"addWishList-inputText-I-9","modal-body":"addWishList-modal-body-uUy"},t.a=c},GN9i:function(e,t,n){"use strict"
var o=n("JPst"),r=n.n(o),a=n("hR8V"),i=r()(function(e){return e[1]})
i.i(a.a,"",!0),i.push([e.i,".textArea-input-FKv {\n}\n\n.textArea-input-FKv:focus {\n    box-shadow: 0px 0px 0px 4px #F2F4F7;\n}\n\n.textArea-input_error-lvO {\n}\n\n.textArea-input_shimmer-PKZ {\n    font-size: 1rem;\n}\n",""]),i.locals={input:"textArea-input-FKv "+a.a.locals.input+" h-auto max-w-full min-w-full px-xs py-3",input_error:"textArea-input_error-lvO textArea-input-FKv "+a.a.locals.input+" h-auto max-w-full min-w-full px-xs py-3 border-error500 focus_border-error500",input_shimmer:"textArea-input_shimmer-PKZ h-auto m-0 max-w-full min-h-[6.75rem] min-w-full px-[15px] py-[12px] rounded-md w-full"},t.a=i},MIsT:function(e,t,n){"use strict"
var o=n("pVnL"),r=n.n(o),a=n("QILm"),i=n.n(a),l=n("q1tI"),s=n.n(l),c=n("17x9"),d=n("8UhI"),u=n("c3RJ"),p=n("y1Xp"),m=n("gpca"),f=n("LboF"),h=n.n(f),v=n("GN9i"),b={injectType:"singletonStyleTag",insert:"head",singleton:!0},g=(h()(v.a,b),v.a.locals||{})
const x=["classes","field","message","regionError"],y=e=>{const{classes:t,field:n,message:o,regionError:a}=e,c=i()(e,x),f=Object(u.a)(n),h=Object(p.a)(g,t)
var v=f.error?h.input_error:h.input
return s.a.createElement(l.Fragment,null,s.a.createElement(d.i,r()({},c,{className:v,field:n})),s.a.createElement(m.a,{fieldState:f},o))}
t.a=y
y.defaultProps={cols:40,rows:6,wrap:"hard"},y.propTypes={classes:Object(c.shape)({input:c.string}),cols:Object(c.oneOfType)([c.number,c.string]),field:c.string.isRequired,message:c.node,rows:Object(c.oneOfType)([c.number,c.string]),wrap:Object(c.oneOf)(["hard","soft"])}},"SO+S":function(e,t,n){"use strict"
n.r(t)
var o=n("pVnL"),r=n.n(o),a=n("q1tI"),i=n.n(a),l=n("17x9"),s=n("dN85"),c=n("KeTD"),d=n("zI+h"),u=n("y1Xp"),p=n("oTwF"),m=n("Ibn+"),f=n("fTrS"),h=n("xwdh"),v=n("+TN3"),b=n("pZLH"),g=n("thnN"),x=n("cXIJ"),y=n("8UhI"),w=n("MIsT"),k=n("U2T0"),E=n("QMhA"),O=n("6rn4"),_=n("J3e4"),j=n("dDsW"),T=n("b1jg"),L=(n("eeNH"),n("AFty"))
var N=function Content(e){var t
const n=Object(u.a)(m.a,e.classes),{close:o,product:r,setAddedWishlist:l}=e,{loading:s,error:c,data:d}=Object(v.b)(g.d,{fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),{formatMessage:f}=Object(j.a)(),[,{addToast:h}]=Object(_.a)(),N=i.a.createElement(p.a,{src:E.a,attrs:{width:18}}),P=i.a.createElement(p.a,{src:O.a,attrs:{width:18}}),C=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20].map(e=>({key:e,value:e,label:String(e)})),I=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20].map(e=>({key:e,value:e,label:String(e)})),S=["High","Normal","Low"].map(e=>({key:e,value:e,label:e})),A=null==d?void 0:d.getWishListsData.findIndex(e=>1===(null==e?void 0:e.is_default)),W=null!==A||-1!==A?null==d?void 0:d.getWishListsData[A]:(null==d?void 0:null===(t=d.getWishListsData)||void 0===t?void 0:t.find(e=>0===(null==e?void 0:e.is_default)))||null,[z,F]=Object(a.useState)((null==W?void 0:W.title)||null),[D,M]=Object(a.useState)((null==W?void 0:W.description)||""),[R,B]=Object(a.useState)((null==W?void 0:W.is_default)||0),[X,q]=Object(a.useState)((null==W?void 0:W.list_id)||0),[H,K]=Object(a.useState)(0)
Object(a.useEffect)(()=>{F((null==W?void 0:W.title)||""),M((null==W?void 0:W.description)||""),B((null==W?void 0:W.is_default)||0),q((null==W?void 0:W.list_id)||0)},[W])
const U=r.ecommerce_product_details.id,J=r.ecommerce_product_details.id,Q=r.ecommerce_product_details.name,Y=r.ecommerce_product_details.price,V=r.ecommerce_name,G=window.location.origin+"/"+r.url_key+r.ecommerce_product_details.category_url_suffix,Z=r.ecommerce_product_details.thumbnails[0],$=Object(y.m)("wish_item_priority").value||"High",ee=Object(y.m)("wish_item_has").value||1,te=Object(y.m)("wish_item_need").value||0,ne=Object(y.m)("wish_item_comment").value||"",{loading:oe,error:re,data:ae}=Object(v.b)(g.d),ie=ae?[...ae.getWishListsData.map(e=>({key:e.list_id,value:e.list_id,label:null==e?void 0:e.title,selected:1===e.is_default})),{key:"create_new",value:0,label:"Create wishlist"}]:[],le=ae?ae.getWishListsData.map(e=>({key:e.list_id,value:e.list_id,label:e.title,selected:1===e.is_default})).find(e=>!0===e.selected):null,[se,ce]=Object(a.useState)((null==le?void 0:le.value)||0)
Object(a.useEffect)(()=>{ce((null==le?void 0:le.value)||0)},[le])
const[de]=Object(b.a)(g.a,{fetchPolicy:"no-cache"}),[ue]=Object(b.a)(g.e,{fetchPolicy:"no-cache"}),[pe]=Object(b.a)(g.b,{fetchPolicy:"no-cache",onCompleted:e=>{var t
e&&!0===(null==e?void 0:null===(t=e.addWishListItem)||void 0===t?void 0:t.status)&&l(!0)}})
return Object(a.useEffect)(()=>{if(H>0)if(0===X){const e=(null==d?void 0:d.getWishListsData)||[]
let t=1
e.length>0&&(t=e.reduce((e,t)=>{const n=t.list_id||0
return n>e?n:e},0)),pe({variables:{listId:t,itemName:U,productComment:ne,productHas:ee,productId:J,productImageUrl:Z,productName:Q,productNeed:te,productPrice:Y,productPriority:$,productProvider:V,productUrl:G}})}else pe({variables:{listId:X,itemName:U,productComment:ne,productHas:ee,productId:J,productImageUrl:Z,productName:Q,productNeed:te,productPrice:Y,productPriority:$,productProvider:V,productUrl:G}})},[H]),i.a.createElement("div",{className:"modal product"},i.a.createElement("form",{method:"POST",action:"/add-to-wish-list",acceptCharset:"UTF-8",className:n.form,role:"form",id:"wishlist-item-form"},i.a.createElement("div",{className:"modal-content"},i.a.createElement("div",{className:"modal-header"},i.a.createElement("div",{className:"modal-title"},"Add to Wish list"),i.a.createElement("a",{href:"#",className:"close",onClick:o},"x")),i.a.createElement("div",{className:"modal-body"},i.a.createElement("h6",{className:"text-muted"},"My Lists"),i.a.createElement("div",{className:"form-group"},i.a.createElement(x.a,{field:"wish_item_priority",items:ie,initialValue:se,onChange:e=>{const t=(null==d?void 0:d.getWishListsData.find(t=>t.list_id==e.target.value))||null
q((null==t?void 0:t.list_id)||0),F((null==t?void 0:t.title)||""),M((null==t?void 0:t.description)||""),B((null==t?void 0:t.is_default)||0)}})),i.a.createElement("div",{className:"form-group"},i.a.createElement(k.a,{label:"Wishlist Name"},i.a.createElement("input",{id:"title-wish-list",className:n.input,value:z,onChange:e=>{F(e.target.value)},required:!0}))),i.a.createElement("div",{className:"form-group"},i.a.createElement(k.a,{label:"Wishlist Description"},i.a.createElement(T.a,{field:"description-wish-list",fieldValue:D,onChange:e=>{M(e.target.value)}}))),i.a.createElement("div",{className:"flex form-group"},i.a.createElement(L.a,{field:"set_default",label:"Set as default",classes:{root:n.checkBox},fieldValue:1===R,onChange:e=>{B(1===R?0:1)}})),i.a.createElement("hr",null),i.a.createElement("br",null),i.a.createElement("h6",{className:"text-muted"},"Product"),i.a.createElement("div",{className:"form-group"},i.a.createElement(k.a,{label:"Description"},i.a.createElement(w.a,{field:"wish_item_comment"}))),i.a.createElement("div",{className:"row"},i.a.createElement(k.a,{label:"Priority",classes:{root:"mb-2"}},i.a.createElement(x.a,{field:"wish_item_priority",items:S,initialValue:"Normal"})),i.a.createElement(k.a,{label:"I own",classes:{root:"mb-2"}},i.a.createElement(x.a,{field:"wish_item_has",items:C})),i.a.createElement(k.a,{label:"I need"},i.a.createElement(x.a,{field:"wish_item_need",items:I})))),i.a.createElement("hr",null),i.a.createElement("div",{className:"modal-footer modal-actions"},i.a.createElement("button",{className:"btn-close",onClick:o},"Close"),i.a.createElement("button",{className:"submit-button",type:"submit",onClick:async()=>{try{""!==z.trim()?(0===X?await de({variables:{title:z,description:D,is_default:R},refetchQueries:[{query:g.d}],awaitRefetchQueries:!0}):await ue({variables:{list_id:X,title:z,description:D,is_default:R},refetchQueries:[{query:g.d}]}),K(H+1),h({type:"success",icon:P,message:f({id:"wishlist.galleryButton.successMessageGeneral",defaultMessage:"Item successfully added to your favorites list."}),timeout:5e3}),o()):h({type:"error",icon:N,message:f({id:"popup.addWishlist.blankTitle",defaultMessage:"The wish list name field is required."}),timeout:5e3})}catch(e){}}},"Save")))))},P=n("kn6o"),C=n("6p+X")
const I=i.a.createElement(p.a,{size:20,src:s.a}),S=e=>{const t=Object(c.a)(e),n=Object(P.a)({mapProduct:C.a}),{product:o}=n,{isEcommerceMercari:l,isInWishlist:s}=e,[p,v]=Object(a.useState)(!1),b=Object(a.useRef)(),{buttonProps:g,buttonText:x,errorToastProps:y,isSelected:w,loginToastProps:k,successToastProps:E}=t
Object(f.a)({errorToastProps:y,loginToastProps:k,successToastProps:E})
const{buttonProps:O}=Object(d.a)(g,b),_=Object(u.a)(m.a,e.classes)
w?_.root_selected:_.root
return i.a.createElement(i.a.Fragment,null,l?i.a.createElement(h.a,{modal:!0,trigger:i.a.createElement("button",{className:"".concat(s||p?_.buttonWishlistActive:_.buttonWishlist)},e.icon),onClose:()=>{document.body.style.overflow="auto"},onOpen:()=>{document.body.style.overflow="hidden"}},e=>i.a.createElement(N,{product:o,close:e,setAddedWishlist:v})):i.a.createElement("button",r()({ref:b},O,{className:_.buttonWishlist}),e.icon))}
t.default=S
S.defaultProps={icon:I},S.propTypes={afterAdd:l.func,beforeAdd:l.func,classes:Object(l.shape)({root:l.string,root_selected:l.string}),icon:l.element}},cXIJ:function(e,t,n){"use strict"
var o=n("pVnL"),r=n.n(o),a=n("QILm"),i=n.n(a),l=n("q1tI"),s=n.n(l),c=n("17x9"),d=n("8UhI"),u=n("y1Xp"),p=n("T/xQ"),m=n("gpca"),f=n("LboF"),h=n.n(f),v=n("856M"),b={injectType:"singletonStyleTag",insert:"head",singleton:!0},g=(h()(v.a,b),v.a.locals||{}),x=n("oTwF"),y=n("j7o3")
const w=["before","classes","regionError","field","items","message"],k=s.a.createElement(x.a,{src:y.a,size:16}),E=e=>{const{before:t,classes:n,regionError:o,field:a,items:c,message:f}=e,h=i()(e,w),v=Object(d.m)(a),b=Object(u.a)(g,n),x=v.error||o?b.input_error:b.input,y=c.map(e=>{let{disabled:t=null,hidden:n=null,label:o,value:r,key:a=r}=e
return s.a.createElement(d.c,{key:a,disabled:t,hidden:n,value:r},o||(null!=r?r:""))})
return s.a.createElement(l.Fragment,null,s.a.createElement(p.a,{after:k,before:t},s.a.createElement(d.g,r()({},h,{className:x,field:a}),y)),s.a.createElement(m.a,{fieldState:v},f))}
t.a=E
E.propTypes={before:c.node,classes:Object(c.shape)({input:c.string}),field:c.string.isRequired,items:Object(c.arrayOf)(Object(c.shape)({key:Object(c.oneOfType)([c.number,c.string]),label:c.string,value:Object(c.oneOfType)([c.number,c.string])})),message:c.node}},eeNH:function(e,t,n){"use strict"
var o=n("LboF"),r=n.n(o),a=n("0UvQ"),i={injectType:"singletonStyleTag",insert:"head",singleton:!0}
r()(a.a,i)
t.a=a.a.locals||{}},xwdh:function(e,t,n){"use strict"
var o=n("q1tI"),r=n.n(o),a=n("i8i4"),i=n.n(a)
function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var l="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,s={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},c=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],d=function getCoordinatesForPosition(e,t,n,o,r){var a=r.offsetX,i=r.offsetY,l=o?8:0,s=n.split(" "),c=e.top+e.height/2,d=e.left+e.width/2,u=t.height,p=t.width,m=c-u/2,f=d-p/2,h="",v="0%",b="0%"
switch(s[0]){case"top":m-=u/2+e.height/2+l,h="rotate(180deg)  translateX(50%)",v="100%",b="50%"
break
case"bottom":m+=u/2+e.height/2+l,h="rotate(0deg) translateY(-100%) translateX(-50%)",b="50%"
break
case"left":f-=p/2+e.width/2+l,h=" rotate(90deg)  translateY(50%) translateX(-25%)",b="100%",v="50%"
break
case"right":f+=p/2+e.width/2+l,h="rotate(-90deg)  translateY(-150%) translateX(25%)",v="50%"}switch(s[1]){case"top":m=e.top,v=e.height/2+"px"
break
case"bottom":m=e.top-u+e.height,v=u-e.height/2+"px"
break
case"left":f=e.left,b=e.width/2+"px"
break
case"right":f=e.left-p+e.width,b=p-e.width/2+"px"}return{top:m="top"===s[0]?m-i:m+i,left:f="left"===s[0]?f-a:f+a,transform:h,arrowLeft:b,arrowTop:v}},u=function calculatePosition(e,t,n,o,r,a){var i=r.offsetX,l=r.offsetY,s={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},u=0,p=function getTooltipBoundary(e){var t={top:0,left:0,width:window.innerWidth,height:window.innerHeight}
if("string"==typeof e){var n=document.querySelector(e)
null!==n&&(t=n.getBoundingClientRect())}return t}(a),m=Array.isArray(n)?n:[n]
for((a||Array.isArray(n))&&(m=[].concat(m,c));u<m.length;){var f={top:(s=d(e,t,m[u],o,{offsetX:i,offsetY:l})).top,left:s.left,width:t.width,height:t.height}
if(!(f.top<=p.top||f.left<=p.left||f.top+f.height>=p.top+p.height||f.left+f.width>=p.left+p.width))break
u++}return s},p=0,m=Object(o.forwardRef)(function(e,t){var n=e.trigger,a=void 0===n?null:n,c=e.onOpen,d=void 0===c?function(){}:c,m=e.onClose,f=void 0===m?function(){}:m,h=e.defaultOpen,v=void 0!==h&&h,b=e.open,g=void 0===b?void 0:b,x=e.disabled,y=void 0!==x&&x,w=e.nested,k=void 0!==w&&w,E=e.closeOnDocumentClick,O=void 0===E||E,_=e.repositionOnResize,j=void 0===_||_,T=e.closeOnEscape,L=void 0===T||T,N=e.on,P=void 0===N?["click"]:N,C=e.contentStyle,I=void 0===C?{}:C,S=e.arrowStyle,A=void 0===S?{}:S,W=e.overlayStyle,z=void 0===W?{}:W,F=e.className,D=void 0===F?"":F,M=e.position,R=void 0===M?"bottom center":M,B=e.modal,X=void 0!==B&&B,q=e.lockScroll,H=void 0!==q&&q,K=e.arrow,U=void 0===K||K,J=e.offsetX,Q=void 0===J?0:J,Y=e.offsetY,V=void 0===Y?0:Y,G=e.mouseEnterDelay,Z=void 0===G?100:G,$=e.mouseLeaveDelay,ee=void 0===$?100:$,te=e.keepTooltipInside,ne=void 0!==te&&te,oe=e.children,re=Object(o.useState)(g||v),ae=re[0],ie=re[1],le=Object(o.useRef)(null),se=Object(o.useRef)(null),ce=Object(o.useRef)(null),de=Object(o.useRef)(null),ue=Object(o.useRef)("popup-"+ ++p),pe=!!X||!a,me=Object(o.useRef)(0)
l(function(){return ae?(de.current=document.activeElement,Ee(),ke(),ye()):we(),function(){clearTimeout(me.current)}},[ae]),Object(o.useEffect)(function(){"boolean"==typeof g&&(g?fe():he())},[g,y])
var fe=function openPopup(e){ae||y||(ie(!0),setTimeout(function(){return d(e)},0))},he=function closePopup(e){var t
ae&&!y&&(ie(!1),pe&&(null===(t=de.current)||void 0===t||t.focus()),setTimeout(function(){return f(e)},0))},ve=function togglePopup(e){null==e||e.stopPropagation(),ae?he(e):fe(e)},be=function onMouseEnter(e){clearTimeout(me.current),me.current=setTimeout(function(){return fe(e)},Z)},ge=function onContextMenu(e){null==e||e.preventDefault(),ve()},xe=function onMouseLeave(e){clearTimeout(me.current),me.current=setTimeout(function(){return he(e)},ee)},ye=function lockScrolll(){pe&&H&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},we=function resetScroll(){pe&&H&&(document.getElementsByTagName("body")[0].style.overflow="auto")},ke=function focusContentOnOpen(){var e,t=null==se?void 0:null===(e=se.current)||void 0===e?void 0:e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),n=Array.prototype.slice.call(t)[0]
null==n||n.focus()}
Object(o.useImperativeHandle)(t,function(){return{open:function open(){fe()},close:function close(){he()},toggle:function toggle(){ve()}}})
var Ee=function setPosition(){if(!pe&&ae&&(null==le?void 0:le.current)&&(null==le?void 0:le.current)&&(null==se?void 0:se.current)){var e,t,n=le.current.getBoundingClientRect(),o=se.current.getBoundingClientRect(),r=u(n,o,R,U,{offsetX:Q,offsetY:V},ne)
if(se.current.style.top=r.top+window.scrollY+"px",se.current.style.left=r.left+window.scrollX+"px",U&&ce.current)ce.current.style.transform=r.transform,ce.current.style.setProperty("-ms-transform",r.transform),ce.current.style.setProperty("-webkit-transform",r.transform),ce.current.style.top=(null===(e=A.top)||void 0===e?void 0:e.toString())||r.arrowTop,ce.current.style.left=(null===(t=A.left)||void 0===t?void 0:t.toString())||r.arrowLeft}}
!function useOnEscape(e,t){void 0===t&&(t=!0),Object(o.useEffect)(function(){if(t){var n=function listener(t){"Escape"===t.key&&e(t)}
return document.addEventListener("keyup",n),function(){t&&document.removeEventListener("keyup",n)}}},[e,t])}(he,L),function useTabbing(e,t){void 0===t&&(t=!0),Object(o.useEffect)(function(){if(t){var n=function listener(t){if(9===t.keyCode){var n,o=null==e?void 0:null===(n=e.current)||void 0===n?void 0:n.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),r=Array.prototype.slice.call(o)
if(1===r.length)return void t.preventDefault()
var a=r[0],i=r[r.length-1]
t.shiftKey&&document.activeElement===a?(t.preventDefault(),i.focus()):document.activeElement===i&&(t.preventDefault(),a.focus())}}
return document.addEventListener("keydown",n),function(){t&&document.removeEventListener("keydown",n)}}},[e,t])}(se,ae&&pe),function useRepositionOnResize(e,t){void 0===t&&(t=!0),Object(o.useEffect)(function(){if(t){var n=function listener(){e()}
return window.addEventListener("resize",n),function(){t&&window.removeEventListener("resize",n)}}},[e,t])}(Ee,j),function useOnClickOutside(e,t,n){void 0===n&&(n=!0),Object(o.useEffect)(function(){if(n){var o=function listener(n){var o=Array.isArray(e)?e:[e],r=!1
o.forEach(function(e){e.current&&!e.current.contains(n.target)||(r=!0)}),n.stopPropagation(),r||t(n)}
return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),function(){n&&(document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o))}}},[e,t,n])}(a?[se,le]:[se],he,O&&!k)
var Oe=function renderContent(){return r.a.createElement("div",Object.assign({},function addWarperAction(){var e=pe?s.popupContent.modal:s.popupContent.tooltip,t={className:"popup-content "+(""!==D?D.split(" ").map(function(e){return e+"-content"}).join(" "):""),style:_extends({},e,I,{pointerEvents:"auto"}),ref:se,onClick:function onClick(e){e.stopPropagation()}}
return!X&&P.indexOf("hover")>=0&&(t.onMouseEnter=be,t.onMouseLeave=xe),t}(),{key:"C",role:pe?"dialog":"tooltip",id:ue.current}),U&&!pe&&r.a.createElement("div",{ref:ce,style:s.popupArrow},r.a.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==D?D.split(" ").map(function(e){return e+"-arrow"}).join(" "):""),viewBox:"0 0 32 16",style:_extends({position:"absolute"},A)},r.a.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),oe&&"function"==typeof oe?oe(he,ae):oe)},_e=!(P.indexOf("hover")>=0),je=pe?s.overlay.modal:s.overlay.tooltip,Te=[_e&&r.a.createElement("div",{key:"O","data-testid":"overlay","data-popup":pe?"modal":"tooltip",className:"popup-overlay "+(""!==D?D.split(" ").map(function(e){return e+"-overlay"}).join(" "):""),style:_extends({},je,z,{pointerEvents:O&&k||pe?"auto":"none"}),onClick:O&&k?he:void 0,tabIndex:-1},pe&&Oe()),!pe&&Oe()]
return r.a.createElement(r.a.Fragment,null,function renderTrigger(){for(var e={key:"T",ref:le,"aria-describedby":ue.current},t=Array.isArray(P)?P:[P],n=0,o=t.length;n<o;n++)switch(t[n]){case"click":e.onClick=ve
break
case"right-click":e.onContextMenu=ge
break
case"hover":e.onMouseEnter=be,e.onMouseLeave=xe
break
case"focus":e.onFocus=be,e.onBlur=xe}if("function"==typeof a){var i=a(ae)
return!!a&&r.a.cloneElement(i,e)}return!!a&&r.a.cloneElement(a,e)}(),ae&&i.a.createPortal(Te,function getRootPopup(){var e=document.getElementById("popup-root")
return null===e&&((e=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(e)),e}()))})
t.a=m}}])
