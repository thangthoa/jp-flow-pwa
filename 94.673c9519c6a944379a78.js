/*! @version pwa-studio: 0.0.1, @magento/venia-ui: ~10.3.0, @magento/venia-sample-payments-checkmo: ^0.0.12, @magento/upward-security-headers: ~1.0.14, @magento/pwa-theme-venia: ~1.4.0, @magento/pwa-buildpack: ~11.4.3, @magento/peregrine: ~13.1.1, @magento/pagebuilder: ~8.2.1, @magento/eslint-config: ~1.5.0, @magento/babel-preset-peregrine: ~1.2.3, @apollo/client: ~3.6.9 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{NYgU:function(e,t,a){"use strict"
a.r(t),a.d(t,"default",function(){return M})
var n,i,s=a("q1tI"),o=a.n(s),r=a("dDsW"),c=a("kriW"),u=a("8UhI"),l=a("J3e4"),m=a("+TN3"),b=a("pZLH"),d=a("y1Xp"),g=a("FITH"),f=a("VkAN"),p=a.n(f),y=a("UYTu")
const h=Object(y.a)(n||(n=p()(["\n    mutation SetNewsletterSubscription($isSubscribed: Boolean!) {\n        updateCustomer(input: { is_subscribed: $isSubscribed }) {\n            # eslint-disable-next-line @graphql-eslint/require-id-when-available\n            customer {\n                is_subscribed\n            }\n        }\n    }\n"])))
var S={getCustomerSubscriptionQuery:Object(y.a)(i||(i=p()(["\n    query GetCustomerSubscription {\n        # eslint-disable-next-line @graphql-eslint/require-id-when-available\n        customer {\n            is_subscribed\n        }\n    }\n"]))),setNewsletterSubscriptionMutation:h}
var P=a("ACyH"),v=a("AFty"),E=a("U2T0"),T=a("dTQg"),j=a("OWb7"),C=a("/HbP"),w=a("LboF"),N=a.n(w),x=a("kEv4"),O={injectType:"singletonStyleTag",insert:"head",singleton:!0},k=(N()(x.a,O),x.a.locals||{})
var M=e=>{const{formatMessage:t}=Object(r.a)(),a=Object(d.a)(k,e.classes),[,{addToast:n}]=Object(l.a)(),i=(e=>{const{afterSubmit:t}=e,a=Object(d.a)(S,e.operations),{getCustomerSubscriptionQuery:n,setNewsletterSubscriptionMutation:i}=a,[{isSignedIn:o}]=Object(g.b)(),{data:r,error:c}=Object(m.b)(n,{skip:!o}),u=Object(s.useMemo)(()=>{if(r)return{isSubscribed:r.customer.is_subscribed}},[r]),[l,{error:f,loading:p}]=Object(b.a)(i)
return{formErrors:[f,c],initialValues:u,handleSubmit:Object(s.useCallback)(async e=>{try{await l({variables:e})}catch(e){return}t&&t()},[l,t]),isDisabled:p}})({afterSubmit:Object(s.useCallback)(()=>{n({type:"info",message:t({id:"communicationsPage.preferencesText",defaultMessage:"Your preferences have been updated."}),timeout:5e3})},[n,t])}),{formErrors:f,handleSubmit:p,initialValues:y,isDisabled:h}=i
if(!y)return C.a
const w=t({id:"communicationsPage.title",defaultMessage:"Communications"})
return o.a.createElement("div",{className:a.root},o.a.createElement(j.b,null,w),o.a.createElement("div",{className:a.title},o.a.createElement(c.a,{id:"communicationsPage.communicationsText",defaultMessage:"Communications"})),o.a.createElement("p",null,o.a.createElement(c.a,{id:"communicationsPage.optInText",defaultMessage:"We'd like to stay in touch. Please check the boxes next to the communications you'd like to receive."})),o.a.createElement(T.a,{errors:f}),o.a.createElement(u.b,{className:a.form,onSubmit:p,initialValues:y},o.a.createElement(E.a,{id:"isSubscribed",label:t({id:"communicationsPage.eNewsletterText",defaultMessage:"Venia E-Newsletter"})},o.a.createElement(v.a,{field:"isSubscribed",label:t({id:"communicationsPage.subscribeText",defaultMessage:"Stay on the cutting edge of fashion; subscribe to the monthly Venia Newsletter."})})),o.a.createElement("div",{className:a.buttonsContainer},o.a.createElement(P.a,{disabled:h,type:"submit",priority:"high"},t(h?{id:"communicationsPage.savingText",defaultMessage:"Saving"}:{id:"communicationsPage.changesText",defaultMessage:"Save Changes"})))))}},kEv4:function(e,t,a){"use strict"
var n=a("JPst"),i=a.n(n)()(function(e){return e[1]})
i.push([e.i,".communicationsPage-root-BcS {\n}\n\n.communicationsPage-title-yCV {\n}\n\n.communicationsPage-form-Na6 {\n}\n\n.communicationsPage-buttonsContainer-YRT {\n}\n",""]),i.locals={root:"communicationsPage-root-BcS grid gap-y-md px-sm py-md lg_px-lg",title:"communicationsPage-title-yCV font-bold font-serif justify-self-center",form:"communicationsPage-form-Na6 grid gap-y-md",buttonsContainer:"communicationsPage-buttonsContainer-YRT flex justify-center lg_justify-start"},t.a=i}}])
