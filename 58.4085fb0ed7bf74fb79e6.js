/*! @version pwa-studio: 0.0.1, @magento/venia-ui: ~10.3.0, @magento/venia-sample-payments-checkmo: ^0.0.12, @magento/upward-security-headers: ~1.0.14, @magento/pwa-theme-venia: ~1.4.0, @magento/pwa-buildpack: ~11.4.3, @magento/peregrine: ~13.1.1, @magento/pagebuilder: ~8.2.1, @magento/eslint-config: ~1.5.0, @magento/babel-preset-peregrine: ~1.2.3, @apollo/client: ~3.6.9 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{"BK+W":function(e,t,a){"use strict"
var n=a("JPst"),r=a.n(n),o=a("mQ6r"),c=a("sARL"),i=r()(function(e){return e[1]})
i.i(o.a,"",!0),i.i(c.a,"",!0),i.push([e.i,".accountInformationPage-root-Hvt {\n}\n\n.accountInformationPage-header-3hr {\n}\n\n.accountInformationPage-title-Y2e {\n}\n\n.accountInformationPage-content-6f0 {\n}\n\n.accountInformationPage-content-6f0 > div {\n    flex: 50%;\n}\n\n.accountInformationPage-accountDetails-hcI {\n}\n\n.accountInformationPage-lineItemsContainer-W-4 {\n    grid-column: 1 / span 1;\n}\n\n.accountInformationPage-settingItemsContainer-43s{\n    grid-column: 1 / span 2;\n}\n\n.accountInformationPage-lineItemLabel-B6Z {\n}\n\n.accountInformationPage-nameLabel-qZL,\n.accountInformationPage-emailLabel-cQy,\n.accountInformationPage-passwordLabel--sl {\n}\n\n.accountInformationPage-nameValue-0bL,\n.accountInformationPage-emailValue-Imq,\n.accountInformationPage-passwordValue-MVM {\n}\n\n.accountInformationPage-editButtonContainer-ryE {\n    grid-column: 1 / span 1;\n}\n\n.accountInformationPage-editInformationButton-lFU {\n}\n",""]),i.locals={root:"accountInformationPage-root-Hvt "+o.a.locals.root+" pt-10",header:"accountInformationPage-header-3hr "+o.a.locals.header,title:"accountInformationPage-title-Y2e "+o.a.locals.title,content:"accountInformationPage-content-6f0 md_flex",accountDetails:"accountInformationPage-accountDetails-hcI gap-y-md grid grid-cols-1 lg_grid-cols-3",lineItemsContainer:"accountInformationPage-lineItemsContainer-W-4 gap-3 grid grid-cols-1 leading-normal lg_gap-xs lg_grid-cols-2",settingItemsContainer:"accountInformationPage-settingItemsContainer-43s gap-3 grid grid-cols-1 leading-normal lg_gap-xs lg_grid-cols-2",lineItemLabel:"accountInformationPage-lineItemLabel-B6Z font-bold",nameLabel:"accountInformationPage-nameLabel-qZL font-bold",emailLabel:"accountInformationPage-emailLabel-cQy font-bold",passwordLabel:"accountInformationPage-passwordLabel--sl font-bold",nameValue:"accountInformationPage-nameValue-0bL",emailValue:"accountInformationPage-emailValue-Imq",passwordValue:"accountInformationPage-passwordValue-MVM",editButtonContainer:"accountInformationPage-editButtonContainer-ryE text-center",editInformationButton:"accountInformationPage-editInformationButton-lFU "+c.a.locals.root_normalPriority},t.a=i},FuqD:function(e,t,a){"use strict"
a.d(t,"a",function(){return m})
var n=a("+TN3"),r=a("q1tI"),o=a("Ty5D"),c=a("JpXh"),i=a("97VA"),s=a("Hupy"),l=a("y1Xp"),u=a("AkOe")
const d=new s.a,m=function useStoreSwitcher(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
const t=Object(l.a)(u.b,e.operations),{availableRoutes:a=[]}=e,s=Object(r.useMemo)(()=>a.map(e=>{if(e.exact)return e.pattern}),[a]),{getStoreConfigData:m,getRouteData:g,getAvailableStoresData:b}=t,{pathname:p,search:f}=Object(o.useLocation)(),{elementRef:h,expanded:y,setExpanded:w,triggerRef:I}=Object(c.a)(),{data:O}=Object(n.b)(m,{nextFetchPolicy:"cache-first",fetchPolicy:"cache-and-network"}),P=Object(i.a)(g),{data:j}=Object(n.b)(b,{nextFetchPolicy:"cache-first",fetchPolicy:"cache-and-network"}),E=Object(r.useMemo)(()=>{if(O)return O.storeConfig.store_name},[O]),M=Object(r.useMemo)(()=>{if(O)return O.storeConfig.store_group_name},[O]),S=Object(r.useMemo)(()=>O&&j&&((e,t)=>{const{store_code:a}=e
return t.reduce((e,t)=>{const{id:n,default_display_currency_code:r,locale:o,secure_base_media_url:c,store_code:i,store_group_code:s,store_group_name:l,store_name:u,store_sort_order:d}=t,m={id:n,currency:r,isCurrent:i===a,locale:o,secure_base_media_url:c,sortOrder:d,storeCode:i,storeGroupCode:s,storeGroupName:l,storeName:u}
return e.set(i,m)},new Map)})(O.storeConfig,j.availableStores)||new Map,[O,j]),v=Object(r.useMemo)(()=>{const e=new Map
return S.forEach(t=>{const a=t.storeGroupCode
if(e.has(a)){e.get(a).splice(t.sortOrder,0,t)}else{const n=[t]
e.set(a,n)}}),e},[S]),C=Object(r.useCallback)(async e=>{if(""===p||"/"===p)return""
let t=""
if(s.includes(p))t=p
else{const{data:a}=await P({fetchPolicy:"no-cache",variables:{url:p},context:{headers:{store:e}}})
a.route&&(t=a.route.relative_url)}return t.startsWith("/")?t.substr(1):t},[p,P,s]),_=Object(r.useCallback)(async e=>{if(!S.has(e))return
d.setItem("store_view_code",e),d.setItem("store_view_currency",S.get(e).currency),d.setItem("store_view_secure_base_media_url",S.get(e).secure_base_media_url)
const t=await C(e),a=t?"/".concat(t).concat(f):""
globalThis.location.assign("".concat(a||"/"))},[S,C,f]),x=Object(r.useCallback)(()=>{w(e=>!e)},[w])
return{availableStores:S,currentGroupName:M,currentStoreName:E,storeGroups:v,storeMenuRef:h,storeMenuTriggerRef:I,storeMenuIsOpen:y,handleTriggerClick:x,handleSwitchStore:_}}},GyKt:function(e,t,a){"use strict"
a.r(t),a.d(t,"default",function(){return P})
var n=a("lSNA"),r=a.n(n),o=a("q1tI"),c=a.n(o),i=a("dDsW"),s=a("kriW"),l=a("rYxi"),u=a("y1Xp"),d=a("gpca"),m=a("OWb7"),g=a("/HbP"),b=a("LboF"),p=a.n(b),f=a("BK+W"),h={injectType:"singletonStyleTag",insert:"head",singleton:!0},y=(p()(f.a,h),f.a.locals||{}),w=a("q9qb"),I=a("JU1h"),O=a("YWFO")
function ownKeys(e,t){var a=Object.keys(e)
if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var P=e=>{const t=Object(u.a)(y,e.classes),a=Object(l.a)(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{}
t%2?ownKeys(Object(a),!0).forEach(function(t){r()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},w.b)),{initialValues:n,loadDataError:o}=a,{formatMessage:b}=Object(i.a)(),p=o?c.a.createElement(d.a,null,c.a.createElement(s.a,{id:"accountInformationPage.errorTryAgain",defaultMessage:"Something went wrong. Please refresh and try again."})):null
let f=null
return n?(f=c.a.createElement("section",{className:t.content},c.a.createElement(I.a,null),c.a.createElement(O.a,null)),c.a.createElement("div",{className:t.root},c.a.createElement(m.b,null,b({id:"accountInformationPage.titleAccount",defaultMessage:"Account Information"})),c.a.createElement("div",{className:t.header},c.a.createElement("h3",{"aria-live":"polite",className:t.title},c.a.createElement(s.a,{id:"accountInformationPage.accountInformation",defaultMessage:"Account Information"}))),p||f)):g.a}},JU1h:function(e,t,a){"use strict"
var n=a("lSNA"),r=a.n(n),o=a("q1tI"),c=a.n(o),i=a("dDsW"),s=a("kriW"),l=a("y1Xp"),u=a("ACyH"),d=a("gpca"),m=a("LboF"),g=a.n(m),b=a("dJp8"),p={injectType:"singletonStyleTag",insert:"head",singleton:!0},f=(g()(b.a,p),b.a.locals||{}),h=a("q9qb"),y=a("rYxi"),w=a("/HbP"),I=a("17x9"),O=a("YWFO")
function ownKeys(e,t){var a=Object.keys(e)
if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}const P=c.a.lazy(()=>a.e(18).then(a.bind(null,"+jtD"))),j=e=>{const t=Object(l.a)(f,e.classes),a=Object(y.a)(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{}
t%2?ownKeys(Object(a),!0).forEach(function(t){r()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},h.b)),{handleCancel:n,formErrors:m,handleChangePassword:g,handleSubmit:b,handleSubmitSettings:p,initialValues:I,isDisabled:j,isUpdateMode:E,isUpdateSettingsMode:M,loadDataError:S,shouldShowNewPassword:v,showUpdateMode:C,showUpdateSettingsMode:_,recaptchaWidgetProps:x}=a,{formatMessage:N}=Object(i.a)(),A=S?c.a.createElement(d.a,null,c.a.createElement(s.a,{id:"accountInformationPage.errorTryAgain",defaultMessage:"Something went wrong. Please refresh and try again."})):null
let D=null
if(!I)return w.a
{const{customer:e}=I,a="".concat(e.firstname," ").concat(e.lastname),r="***********"
D=c.a.createElement(o.Fragment,null,c.a.createElement("div",{className:t.accountBox},c.a.createElement("div",{className:"w-full"},c.a.createElement("div",{className:t.accountDetails},c.a.createElement("div",{className:t.lineItemsContainer},c.a.createElement("div",{className:t.lineItem},c.a.createElement("span",{className:t.lineItemLabel},c.a.createElement(s.a,{id:"global.name",defaultMessage:"Name"})),c.a.createElement("span",{className:t.lineItemValue},a)),c.a.createElement("div",{className:t.lineItem},c.a.createElement("span",{className:t.lineItemLabel},c.a.createElement(s.a,{id:"global.email",defaultMessage:"Email"})),c.a.createElement("span",{className:t.lineItemValue},e.email)),c.a.createElement("div",{className:"".concat(t.lineItem," ").concat(t.lineItemPassword)},c.a.createElement("span",{className:t.lineItemLabel},c.a.createElement(s.a,{id:"global.password",defaultMessage:"Password"})),c.a.createElement("span",{className:t.lineItemValue},r))),c.a.createElement("div",{className:t.editButtonContainer},c.a.createElement(u.a,{className:t.editInformationButton,disabled:!1,onClick:C,priority:"high"},c.a.createElement(s.a,{id:"global.editButton",defaultMessage:"Edit"})))),c.a.createElement(o.Suspense,{fallback:null},c.a.createElement(P,{formErrors:m,initialValues:e,isDisabled:j,isOpen:E,onCancel:n,onChangePassword:g,onSubmit:b,shouldShowNewPassword:v,recaptchaWidgetProps:x}))),c.a.createElement("div",{className:"w-full"},c.a.createElement(O.a,null))))}return c.a.createElement(o.Fragment,null,c.a.createElement("div",{className:t.root},A||D))}
j.propTypes={classes:Object(I.shape)({root:I.string})}
t.a=j},YWFO:function(e,t,a){"use strict"
var n=a("lSNA"),r=a.n(n),o=a("q1tI"),c=a.n(o),i=a("dDsW"),s=a("kriW"),l=a("y1Xp"),u=a("jfDq"),d=a("ACyH"),m=a("gpca"),g=a("LboF"),b=a.n(g),p=a("mQ6r"),f={injectType:"singletonStyleTag",insert:"head",singleton:!0},h=(b()(p.a,f),p.a.locals||{}),y=a("q9qb"),w=a("rYxi"),I=a("PsEx"),O=a("FuqD"),P=a("/HbP"),j=a("17x9")
function ownKeys(e,t){var a=Object.keys(e)
if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}c.a.lazy(()=>a.e(18).then(a.bind(null,"+jtD")))
const E=c.a.lazy(()=>Promise.all([a.e(0),a.e(53)]).then(a.bind(null,"SeNz"))),M=e=>{const t=Object(l.a)(h,e.classes),a=Object(w.a)(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{}
t%2?ownKeys(Object(a),!0).forEach(function(t){r()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},y.b)),{handleCancel:n,formErrors:g,handleChangePassword:b,handleSubmit:p,handleSubmitSettings:f,initialValues:j,isDisabled:M,isUpdateMode:S,isUpdateSettingsMode:v,loadDataError:C,shouldShowNewPassword:_,showUpdateMode:x,showUpdateSettingsMode:N,recaptchaWidgetProps:A}=a,{formatMessage:D}=Object(i.a)(),{availableCurrencies:L}=Object(I.a)(),{availableStores:k}=Object(O.a)(),B=Array.from(k.values()).map(e=>({label:e.storeName,value:e.id})),V=null==L?void 0:L.map(e=>({label:e,value:e})),W=C?c.a.createElement(m.a,null,c.a.createElement(s.a,{id:"accountInformationPage.errorTryAgain",defaultMessage:"Something went wrong. Please refresh and try again."})):null
let U=null
if(!j)return P.a
{const{customer:e}=j,a=parseInt(e.contact_language),r=Array.from(k.values()).filter(e=>e.id===a),i=r.length>0?r[0].storeName:c.a.createElement(s.a,{id:"dashBoardPage.settingNoLanguageError",defaultMessage:"No language selected"})
U=c.a.createElement(o.Fragment,null,c.a.createElement("div",{className:"w-full"},c.a.createElement("div",{className:t.accountDetails},c.a.createElement("div",{className:t.lineItemsContainer},c.a.createElement("div",{className:t.lineItem},c.a.createElement("span",{className:t.lineItemLabel},c.a.createElement(s.a,{id:"AccountInformationPage.contactLanguage",defaultMessage:"Contact Language"})),c.a.createElement("span",{className:t.lineItemValue},i)),c.a.createElement("div",{className:t.lineItem},c.a.createElement("span",{className:t.lineItemLabel},c.a.createElement(s.a,{id:"AccountInformationPage.currencyDisplay",defaultMessage:"Currency Display"})),c.a.createElement("span",{className:t.lineItemValue},null!=e.customer_currency?c.a.createElement("span",null,c.a.createElement(u.a,{currencyCode:e.customer_currency,currencyDisplay:"narrowSymbol"})," ",e.customer_currency):c.a.createElement(s.a,{id:"dashBoardPage.settingNoCurrencyError",defaultMessage:"No currency selected"})))),c.a.createElement("div",{className:t.editButtonContainer},c.a.createElement(d.a,{className:t.editInformationButton,disabled:!1,onClick:N,priority:"high"},c.a.createElement(s.a,{id:"AccountInformationPage.editAccountSettings",defaultMessage:"Edit Settings"})))),c.a.createElement(o.Suspense,{fallback:null},c.a.createElement(E,{formErrors:g,initialValues:e,isDisabled:M,isOpen:v,onCancel:n,onSubmit:f,recaptchaWidgetProps:A,languageOptions:B,currencyOptions:V}))))}return c.a.createElement(o.Fragment,null,c.a.createElement("div",{className:t.root},W||U))}
M.propTypes={classes:Object(j.shape)({root:j.string})}
t.a=M},dJp8:function(e,t,a){"use strict"
var n=a("JPst"),r=a.n(n),o=a("cMkR"),c=r()(function(e){return e[1]})
c.i(o.a,"",!0),c.push([e.i,".dashboardMyAccount-root-qUm {\n    margin-left: auto;\n    margin-right: auto;\n    max-width: 73.25rem;\n}\n\n.dashboardMyAccount-header-z0- {\n    margin-top: 2.5rem;\n    margin-bottom: 2.5rem;\n    text-align: center;\n}\n\n@media (min-width: 960px) {\n\n    .dashboardMyAccount-header-z0- {\n        margin-top: 0px;\n    }\n}\n\n.dashboardMyAccount-title-5Lx {\n    --tw-text-opacity: 1;\n    color: rgba(29, 41, 57, var(--tw-text-opacity));\n}\n\n.dashboardMyAccount-editButtonContainer-wGE {\n    margin-top: 1.5rem;\n}\n\n.dashboardMyAccount-accountBox-YWX {\n    margin-left: auto;\n    margin-right: auto;\n    border-radius: 0.5rem;\n    border-width: 1px;\n    --tw-border-opacity: 1;\n    border-color: rgba(216, 221, 229, var(--tw-border-opacity));\n    background-color: rgba(255, 255, 255, 1);\n    padding-top: 1.5rem;\n    padding-bottom: 1.5rem;\n    padding-left: 1rem;\n    padding-right: 1rem;\n}\n\n@media (min-width: 960px) {\n\n    .dashboardMyAccount-accountBox-YWX {\n        padding-left: 1.5rem;\n        padding-right: 1.5rem;\n    }\n}\n\n.dashboardMyAccount-editInformationButton-RWb {\n}\n\n.dashboardMyAccount-accountDetails-IXi {\n    \n}\n\n.dashboardMyAccount-lineItem-YMd {\n    margin-bottom: 0.75rem;\n    display: flex;\n    align-items: flex-start;\n}\n\n.dashboardMyAccount-lineItem-YMd:last-child {\n    margin-bottom: 0px;\n}\n\n.dashboardMyAccount-lineItem-YMd.dashboardMyAccount-lineItemPassword-MXk {\n    align-items: flex-end;\n}\n\n.dashboardMyAccount-lineItem-YMd.dashboardMyAccount-lineItemPassword-MXk .dashboardMyAccount-lineItemValue-8G7 {\n    line-height: 1;\n}\n\n.dashboardMyAccount-lineItemLabel-3mW {\n    position: relative;\n    padding-right: 0.75rem;\n    font-weight: 700;\n    --tw-text-opacity: 1;\n    color: rgba(29, 41, 57, var(--tw-text-opacity));\n}\n\n.dashboardMyAccount-lineItemLabel-3mW::after {\n    content: ':';\n    display: block;\n    position: absolute;\n    right: 4px;\n    top: 0;\n}\n\n.dashboardMyAccount-lineItemValue-8G7 {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n\n@media (min-width: 768px) {\n    .dashboardMyAccount-accountBox-YWX {\n        grid-template-columns: repeat(2, 1fr);\n    }\n}",""]),c.locals={root:"dashboardMyAccount-root-qUm",header:"dashboardMyAccount-header-z0-",title:"dashboardMyAccount-title-5Lx",editButtonContainer:"dashboardMyAccount-editButtonContainer-wGE",accountBox:"dashboardMyAccount-accountBox-YWX grid gap-6 gap-4",editInformationButton:"dashboardMyAccount-editInformationButton-RWb "+o.a.locals.root_highPriority+" min-w-auto",accountDetails:"dashboardMyAccount-accountDetails-IXi",lineItem:"dashboardMyAccount-lineItem-YMd",lineItemPassword:"dashboardMyAccount-lineItemPassword-MXk",lineItemValue:"dashboardMyAccount-lineItemValue-8G7",lineItemLabel:"dashboardMyAccount-lineItemLabel-3mW"},t.a=c},mQ6r:function(e,t,a){"use strict"
var n=a("JPst"),r=a.n(n),o=a("cMkR"),c=r()(function(e){return e[1]})
c.i(o.a,"",!0),c.push([e.i,".dashboardSetting-root-eOr {\n    margin-left: auto;\n    margin-right: auto;\n    max-width: 73.25rem;\n}\n\n.dashboardSetting-header-vui {\n    margin-top: 2.5rem;\n    margin-bottom: 2.5rem;\n    text-align: center;\n}\n\n@media (min-width: 960px) {\n\n    .dashboardSetting-header-vui {\n        margin-top: 0px;\n    }\n}\n\n.dashboardSetting-title--4P {\n    --tw-text-opacity: 1;\n    color: rgba(29, 41, 57, var(--tw-text-opacity));\n}\n\n.dashboardSetting-editButtonContainer-Y5K {\n    margin-top: 1.5rem;\n}\n\n.dashboardSetting-editInformationButton-0VH {\n}\n\n.dashboardSetting-accountDetails-Nlt {\n    /* @apply py-6 mx-auto bg-white border rounded-lg px-xs lg_px-sm border-neutral300; */\n}\n\n.dashboardSetting-lineItem-Zs2 {\n    margin-bottom: 0.75rem;\n    display: flex;\n    align-items: flex-start;\n}\n\n.dashboardSetting-lineItem-Zs2:last-child {\n    margin-bottom: 0px;\n}\n\n.dashboardSetting-lineItemLabel-wVF {\n    position: relative;\n    padding-right: 0.75rem;\n    font-weight: 700;\n    --tw-text-opacity: 1;\n    color: rgba(29, 41, 57, var(--tw-text-opacity));\n}\n\n.dashboardSetting-lineItemLabel-wVF::after {\n    content: ':';\n    display: block;\n    position: absolute;\n    right: 4px;\n    top: 0;\n}\n\n.dashboardSetting-lineItemValue-d5g {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n",""]),c.locals={root:"dashboardSetting-root-eOr",header:"dashboardSetting-header-vui",title:"dashboardSetting-title--4P",editButtonContainer:"dashboardSetting-editButtonContainer-Y5K",editInformationButton:"dashboardSetting-editInformationButton-0VH "+o.a.locals.root_highPriority+" min-w-auto",accountDetails:"dashboardSetting-accountDetails-Nlt",lineItem:"dashboardSetting-lineItem-Zs2",lineItemLabel:"dashboardSetting-lineItemLabel-wVF",lineItemValue:"dashboardSetting-lineItemValue-d5g"},t.a=c},rYxi:function(e,t,a){"use strict"
a.d(t,"a",function(){return m})
var n=a("lSNA"),r=a.n(n),o=a("q1tI"),c=a("+TN3"),i=a("pZLH"),s=a("FITH"),l=a("MsnC"),u=a("Cess")
function ownKeys(e,t){var a=Object.keys(e)
if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}const d=new(a("Hupy").a),m=e=>{const{mutations:{setCustomerInformationMutation:t,setCustomerSettingsMutation:a,changeCustomerPasswordMutation:n,applyCurrencyCodeMutation:m},queries:{getCustomerInformationQuery:g}}=e,[{isSignedIn:b}]=Object(s.b)(),[p,f]=Object(o.useState)(!1),[h,y]=Object(o.useState)(!1),[w,I]=Object(o.useState)(!1),[,{dispatch:O}]=Object(u.b)(),[P,j]=Object(o.useState)(!1),{data:E,error:M}=Object(c.b)(g,{skip:!b,fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),[S,{error:v,loading:C}]=Object(i.a)(t),[_,{error:x,loading:N}]=Object(i.a)(a),[A,{error:D,loading:L}]=Object(i.a)(n),{generateReCaptchaData:k,recaptchaLoading:B,recaptchaWidgetProps:V}=Object(l.a)({currentForm:"CUSTOMER_EDIT",formAction:"editCustomer"}),[W]=Object(i.a)(m,{fetchPolicy:"no-cache"}),U=Object(o.useMemo)(()=>{if(E)return{customer:E.customer}},[E]),T=Object(o.useCallback)(()=>{f(!0)},[f]),F=Object(o.useCallback)(()=>{y(!1),I(!1),f(!1)},[y,I]),q=Object(o.useCallback)(()=>{y(!0),j(!1)},[y]),Y=Object(o.useCallback)(()=>{I(!0),j(!1)},[I]),K=Object(o.useCallback)(async e=>{let{email:t,firstname:a,lastname:n,password:o,newPassword:c}=e
try{if(t=t.trim(),a=a.trim(),n=n.trim(),o=o.trim(),c=c?c.trim():c,U.customer.email===t&&U.customer.firstname===a&&U.customer.lastname===n||await S({variables:{customerInput:{email:t,firstname:a,lastname:n,password:o}}}),o&&c){const e=await k()
await A(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{}
t%2?ownKeys(Object(a),!0).forEach(function(t){r()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({variables:{currentPassword:o,newPassword:c}},e))}O({type:"USER_ACCOUNT_UPDATE",payload:{email:t,firstName:a,lastName:n}}),F(!1)}catch(e){return void j(!0)}},[U,F,S,k,A,O]),R=Object(o.useCallback)(async e=>{let{contact_language:t,customer_currency:a}=e
try{if(t=t.trim(),a=a.trim(),U.customer.contact_language!==t||U.customer.customer_currency!==a){await _({variables:{customerInput:{contact_language:t,customer_currency:a}}})
const e=(await W({variables:{currencyCode:a}})).data.applyCurrencyCode.rate
d.setItem("store_view_currency_updated",a),d.setItem("store_view_currency_rate",e),U.customer.customer_currency!==a&&history.go(0)}O({type:"USER_ACCOUNT_UPDATE",payload:{contactLanguage:t,customerCurrency:a}}),F(!1)}catch(e){return void j(!0)}},[U,F,_,k,O])
return{handleCancel:F,formErrors:P?[v,D,x]:[],handleSubmit:K,handleSubmitSettings:R,handleChangePassword:T,initialValues:U,isDisabled:C||L||N||B,isUpdateMode:h,isUpdateSettingsMode:w,loadDataError:M,shouldShowNewPassword:p,showUpdateMode:q,showUpdateSettingsMode:Y,recaptchaWidgetProps:V}}}}])
